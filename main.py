import asyncio
from dotenv import load_dotenv
from livekit.agents import AutoSubscribe, JobContext, WorkerOptions, cli, llm
from livekit.agents.voice_assistant import VoiceAssistant
from livekit.plugins import openai, silero

load_dotenv()

async def entrypoint(ctx: JobContext):
    specialized_knowledge = """
लखनऊ – निवेश के बेहतरीन अवसर
स्थान:

राजधानी लखनऊ के जिला पंचायत अप्रूव्ड डिफ़ेंस इंडस्ट्रीयल कारिडोर के पास
मेन किसान पथ हाइवे, लखनऊ-रायबरेली हाईवे के समीप
निगोहां नगराम रोड, समेसी बाज़ार के पास
प्रॉपर्टी डिटेल्स:

रिहायशी प्लॉट्स:

कीमत: 499 रुपये प्रति Sq.Ft
उपलब्ध आकार: 1000 से 5000 Sq.Ft तक
काल्पनिक डेटा: 2025 तक अनुमानित मूल्य में 15% की वृद्धि की संभावना, साथ ही 10 साल में रिटर्न रेट 25% तक होने की उम्मीद
कॉमर्शियल प्लॉट्स:

कीमत: 650 रुपये प्रति Sq.Ft
उपलब्ध आकार: 2000 से 8000 Sq.Ft तक
काल्पनिक डेटा: आने वाले 3 वर्षों में व्यावसायिक केंद्रों के निर्माण से 30% निवेश लाभ की संभावना
आस-पास की प्रमुख सुविधाएँ एवं दूरी
समेसी मार्केट:

दूरी: 500 मीटर
अतिरिक्त सुविधा: 24×7 व्यापारिक गतिविधि, विविध दुकानें एवं सुपरमार्केट
नगराम रोड (4 लेन हाइवे):

दूरी: 400 मीटर
काल्पनिक डेटा: हाइवे एक्सेस में सुधार से आने वाले 2 वर्षों में यातायात में 20% की वृद्धि
नगराम सिटी बस स्टॉप (प्रस्तावित):

दूरी: 500 मीटर
अतिरिक्त सुविधा: सार्वजनिक परिवहन में बेहतर कनेक्टिविटी की योजना
रायबरेली रोड:

दूरी: 7 km
काल्पनिक डेटा: नया एक्सप्रेसवे कनेक्शन योजना के चलते यातायात में और तेजी, जिससे क्षेत्र की पहुँच बढ़ेगी
मोहनलालगंज तहसील:

दूरी: 17 km
अतिरिक्त सुविधा: प्रशासनिक कार्यालय एवं अन्य सरकारी सुविधाएँ उपलब्ध
SGPGI हॉस्पिटल:

दूरी: 23 km
काल्पनिक डेटा: नजदीकी हेल्थकेयर सुविधा में हाल ही में निवेश बढ़ा है, जिससे चिकित्सा सेवा में सुधार हुआ है
अटल विश्वविद्यालय:

दूरी: 7 km
अतिरिक्त सुविधा: उच्च शैक्षणिक संस्थान के पास होने के कारण रिहायशी मांग में वृद्धि की संभावना
आवास विकास:

दूरी: 12 km
काल्पनिक डेटा: क्षेत्र में नए आवासीय प्रोजेक्ट्स शुरू हो चुके हैं, जिससे स्थानीय रियल एस्टेट में रुचि बढ़ी है
न्यू जेल रोड:

दूरी: 15 km
अतिरिक्त सुविधा: बेहतर कनेक्टिविटी और सुरक्षित परिवहन विकल्प उपलब्ध
सुल्तानपुर रोड:

दूरी: 18 km
काल्पनिक डेटा: नयी सड़क योजना के चलते यातायात नियंत्रण में सुधार एवं क्षेत्रीय विकास की संभावनाएँ
प्लासियो मॉल और एकाना स्टेडियम:

दूरी: 23 km
अतिरिक्त सुविधा: शॉपिंग, मनोरंजन एवं खेल सुविधाओं की उपलब्धता, जो निवेशकों और निवासियों दोनों के लिए आकर्षण का केंद्र है
लुलु मॉल:

दूरी: 22 km
काल्पनिक डेटा: इस क्षेत्र में आने वाले 5 वर्षों में 50+ राष्ट्रीय ब्रांड्स की शोरूम की योजना, जिससे व्यावसायिक गतिविधियों में तेजी आएगी
अतिरिक्त विशेषताएँ
साइट विज़िट की सुविधा:

नियमित रूप से साइट विज़िट एवं प्रोजेक्ट डिस्प्ले उपलब्ध
काल्पनिक डेटा: 2025 में एक विशेष ओपन हाउस इवेंट आयोजित किया जाएगा, जहाँ निवेशकों को एक्सक्लूसिव ऑफर्स प्रदान किए जाएंगे
विकास की संभावना:

लखनऊ का सबसे ग्रोइंग एरिया माना जा रहा है
भविष्य में इन्फ्रास्ट्रक्चर में बड़े सुधार की योजनाएँ, जिससे निवेश पर उच्च रिटर्न की संभावना बढ़ जाती है
काल्पनिक डेटा: आगामी 2-3 वर्षों में, क्षेत्र में औद्योगिक पार्क, शॉपिंग कॉम्प्लेक्स और मनोरंजन के नए प्रोजेक्ट्स की घोषणा की जा सकती है
परिवहन एवं कनेक्टिविटी:

प्रमुख हाइवे, बस स्टॉप और नजदीकी शैक्षणिक एवं चिकित्सा संस्थानों के कारण यहाँ का परिवहन नेटवर्क बहुत मजबूत है
भविष्य के परिवहन प्रोजेक्ट्स के चलते क्षेत्र में और विकास की संभावना

    """

    initial_ctx = llm.ChatContext().append(
        role="system",
        text=(
            "आप एक प्लॉट डीलर वॉयस असिस्टेंट हैं। आपकी बातचीत हिंदी में होगी। "
            "आपको संक्षिप्त और सटीक उत्तर देने चाहिए, और अप्रमाण्य विराम चिह्नों का उपयोग करने से बचना चाहिए। "
            "यहाँ कुछ महत्वपूर्ण जानकारी है:\n" + specialized_knowledge
        )
    )

    await ctx.connect(auto_subscribe=AutoSubscribe.AUDIO_ONLY)

    assistant = VoiceAssistant(
        vad=silero.VAD.load(),
        stt=openai.STT(),
        llm=openai.LLM(),
        tts=openai.TTS(),
        chat_ctx=initial_ctx
    )
    assistant.start(ctx.room)

    await asyncio.sleep(1)
    await assistant.say("नमस्ते, मैं आपकी कैसे सहायता कर सकता हूँ?", allow_interruptions=True)

if __name__ == "__main__":
    cli.run_app(WorkerOptions(entrypoint_fnc=entrypoint))
